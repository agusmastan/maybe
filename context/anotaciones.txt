Ejecutar bd (con \dt ves las tablas y con q salis)
psql -U maybe_user -d maybe_production

Actualizar precio usd/eur 
ExchangeRate.update_usd_to_eur_rate!

docker compose exec web bash

bundle exec rails runner context/test_import_market_data_job.rb

Actualizar logos
bundle exec rails runner 'Security.where(logo_url: [nil, ""]).each { |s| puts "Actualizando #{s.ticker}..."; s.import_provider_details(clear_cache: true); puts "Logo: #{s.reload.logo_url.present? ? "âœ…" : "âŒ"}" }'

Actualizar precios (ejecuta job import_market_data)
docker compose exec web bash
RAILS_ENV=production bundle exec rails runner "ImportMarketDataJob.perform_now(mode: 'snapshot', clear_cache: false)"


RAILS_ENV=production bundle exec rails runner "
security = Security.find_by(ticker: 'BINANCE:ETHUSDT')
if security.present?
  puts 'ğŸ”„ Actualizando BINANCE:ETHUSDT...'
  puts '   Estado actual:'
  puts '   - Nombre: ' + (security.name || 'Sin nombre').to_s
  puts '   - Logo: ' + (security.logo_url || 'Sin logo').to_s
  
  begin
    # 2. Actualizar detalles manualmente
    puts 'ğŸ·ï¸  Actualizando detalles manualmente...'
    security.update!(
      name: 'Ethereum'
    )
    
    puts 'âœ… ActualizaciÃ³n completada:'
    if price.present?
      puts '   - Precio: ' + price.price.to_s + ' ' + price.currency + ' (' + price.date.to_s + ')'
    else
      puts '   - Precio: âŒ No disponible'
    end
    puts '   - Nombre: ' + security.name.to_s
    puts '   - Logo: ' + security.logo_url.to_s
    puts '   - Exchange: ' + (security.exchange_operating_mic || 'N/A').to_s
    puts '   - Offline: ' + security.offline.to_s
    
  rescue => e
    puts 'âŒ Error durante la actualizaciÃ³n: ' + e.message
    puts e.backtrace.first(3).join(\"\\n\")
  end
else
  puts 'âŒ Security BINANCE:ETHUSDT no encontrado'
  puts 'ğŸ” Buscando securities similares...'
  similar = Security.where('ticker ILIKE ?', '%ETH%').limit(5)
  if similar.any?
    puts '   Securities encontrados con ETH:'
    similar.each do |s|
      puts '   - ' + s.ticker + ': ' + (s.name || 'Sin nombre')
    end
  else
    puts '   No se encontraron securities similares'
  end
end
"